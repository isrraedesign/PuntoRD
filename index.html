<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PuntoRD â€” GuÃ­a TurÃ­stica Puerto Plata & Punta Cana</title>

  <!-- LibrerÃ­a Leaflet para el mapa -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ğŸŒ´ PuntoRD</h1>
    <p>Tu guÃ­a interactiva de <b>Puerto Plata</b> y <b>Punta Cana</b></p>

    <!-- Selector de idioma -->
    <select id="languageSelect">
      <option value="es">EspaÃ±ol ğŸ‡ªğŸ‡¸</option>
      <option value="en">English ğŸ‡¬ğŸ‡§</option>
      <option value="fr">FranÃ§ais ğŸ‡«ğŸ‡·</option>
      <option value="it">Italiano ğŸ‡®ğŸ‡¹</option>
      <option value="zh">ä¸­æ–‡ ğŸ‡¨ğŸ‡³</option>
    </select>

    <!-- Selector de provincia -->
    <select id="provinceSelect">
      <option value="puertoplata">Puerto Plata</option>
      <option value="puntacana">Punta Cana</option>
    </select>
  </header>

  <div id="map"></div>

  <footer>
    <p>Â© 2025 PuntoRD â€” GuÃ­a TurÃ­stica Interactiva de RepÃºblica Dominicana</p>
  </footer>

  <script>
    // ConfiguraciÃ³n inicial del mapa
    const map = L.map('map').setView([19.8, -70.7], 12);

    // Estilo visual del mapa (colorido, diferente de Google Maps)
    L.tileLayer('https://{s}.tile.jawg.io/jawg-sunny/{z}/{x}/{y}{r}.png?access-token=YOUR_ACCESS_TOKEN', {
      attribution: 'Map data Â© OpenStreetMap contributors',
      minZoom: 10,
      maxZoom: 18
    }).addTo(map);

    // Cargar los lugares desde el archivo lugares.json
    async function cargarLugares(provincia) {
      const response = await fetch('lugares.json');
      const data = await response.json();

      // Limpiar marcadores anteriores
      map.eachLayer((layer) => {
        if (layer instanceof L.Marker) {
          map.removeLayer(layer);
        }
      });

      // Filtrar por provincia seleccionada
      const lugaresFiltrados = data.filter(l => l.provincia === provincia);

      // AÃ±adir marcadores
      lugaresFiltrados.forEach(lugar => {
        const marker = L.marker([lugar.lat, lugar.lon]).addTo(map);
        marker.bindPopup(`
          <b>${lugar.nombre}</b><br>
          ${lugar.descripcion}<br>
          <b>Tipo:</b> ${lugar.tipo}<br>
          <a href="${lugar.ruta}" target="_blank">ğŸ§­ CÃ³mo llegar</a>
        `);
      });

      // Centrar mapa segÃºn provincia
      if (provincia === "puertoplata") map.setView([19.8, -70.7], 12);
      if (provincia === "puntacana") map.setView([18.58, -68.4], 12);
    }

    // Evento al cambiar provincia
    document.getElementById('provinceSelect').addEventListener('change', (e) => {
      cargarLugares(e.target.value);
    });

    // Idiomas (traducciÃ³n simple de interfaz)
    const textos = {
      es: { titulo: "Tu guÃ­a interactiva de Puerto Plata y Punta Cana" },
      en: { titulo: "Your interactive guide to Puerto Plata and Punta Cana" },
      fr: { titulo: "Votre guide interactif de Puerto Plata et Punta Cana" },
      it: { titulo: "La tua guida interattiva di Puerto Plata e Punta Cana" },
      zh: { titulo: "æ™®æ‹‰å¡”æ¸¯å’Œè“¬å¡”å¡çº³äº’åŠ¨æ—…æ¸¸æŒ‡å—" }
    };

    document.getElementById('languageSelect').addEventListener('change', (e) => {
      const lang = e.target.value;
      document.querySelector('header p').textContent = textos[lang].titulo;
    });

    // Cargar por defecto Puerto Plata
    cargarLugares("puertoplata");
  </script>
</body>
</html>
