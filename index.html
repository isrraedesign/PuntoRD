<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ExploraRD â€” GuÃ­a TurÃ­stica Interactiva</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  body {margin:0; font-family:'Poppins',sans-serif; background:#f9f8f4;}
  header {
    background:linear-gradient(90deg,#00897b,#4db6ac);
    color:white; padding:10px 20px; display:flex;
    justify-content:space-between; align-items:center;
    font-weight:bold; letter-spacing:0.5px;
  }
  header h1 {font-size:1.1rem; margin:0;}
  #map {height:100vh;}
  #langBtn {
    background:#004d40; color:white; border:none; padding:6px 12px;
    border-radius:8px; cursor:pointer; font-weight:bold;
  }
  .leaflet-popup-content {font-size:0.95rem; line-height:1.3;}
  .popup-btn {
    background:#00796b; color:white; border:none; border-radius:6px;
    padding:4px 8px; cursor:pointer; font-size:0.85rem; margin-top:4px;
  }
</style>
</head>
<body>

<header>
  <h1>ðŸŒ´ ExploraRD â€” Mapa TurÃ­stico</h1>
  <button id="langBtn">English</button>
</header>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ======= CONFIGURACIÃ“N =======
let lang = "es";
const map = L.map('map').setView([18.7, -70.2], 7);

// ðŸŽ¨ Estilo de mapa Ãºnico (no igual a Google)
L.tileLayer('https://{s}.tile.jawg.io/jawg-sunny/{z}/{x}/{y}{r}.png?access-token=5zT6Rglq3sYl4mXUztuR9efgVto4ke6aZWeT4SRf4J3bUGbH4m3tH5U1fEhnp58D', {
  attribution: 'Â© Jawg Maps & OpenStreetMap',
}).addTo(map);

// ======= LUGARES =======
const lugares = [
  {
    coords: [19.773, -70.698],
    es: {nombre:"TelefÃ©rico de Puerto Plata", tipo:"Mirador", desc:"Vista panorÃ¡mica desde el monte Isabel de Torres."},
    en: {nombre:"Puerto Plata Cable Car", tipo:"Viewpoint", desc:"Panoramic view from Isabel de Torres mountain."}
  },
  {
    coords: [19.755, -70.519],
    es: {nombre:"Playa SosÃºa", tipo:"Playa", desc:"Arena dorada y aguas claras ideales para bucear."},
    en: {nombre:"SosÃºa Beach", tipo:"Beach", desc:"Golden sand and clear waters perfect for diving."}
  },
  {
    coords: [18.693, -68.429],
    es: {nombre:"Playa BÃ¡varo", tipo:"Playa", desc:"Una de las playas mÃ¡s famosas de Punta Cana."},
    en: {nombre:"Bavaro Beach", tipo:"Beach", desc:"One of Punta Canaâ€™s most famous beaches."}
  },
  {
    coords: [18.522, -68.363],
    es: {nombre:"Hoyo Azul", tipo:"Cenote", desc:"Piscina natural azul intenso en Scape Park."},
    en: {nombre:"Hoyo Azul", tipo:"Cenote", desc:"Natural blue pool inside Scape Park."}
  }
];

// ======= FUNCIONES =======
function mostrarLugares() {
  map.eachLayer(l => { if (l instanceof L.Marker) map.removeLayer(l); });
  lugares.forEach(lugar => {
    const t = lang === "es" ? lugar.es : lugar.en;
    const marker = L.marker(lugar.coords).addTo(map);
    marker.bindTooltip(t.nombre, {permanent:true, direction:'top', offset:[0,-10]});
    marker.bindPopup(`
      <b>${t.nombre}</b><br>
      ${t.tipo}<br>
      ${t.desc}<br>
      <button class="popup-btn" onclick="ruta(${lugar.coords[0]},${lugar.coords[1]})">
        ${lang === "es" ? "CÃ³mo llegar" : "Get directions"}
      </button>
    `);
  });
}

function ruta(lat, lon) {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      const url = `https://www.google.com/maps/dir/${pos.coords.latitude},${pos.coords.longitude}/${lat},${lon}`;
      window.open(url, "_blank");
    }, () => window.open(`https://www.google.com/maps?q=${lat},${lon}`, "_blank"));
  } else {
    window.open(`https://www.google.com/maps?q=${lat},${lon}`, "_blank");
  }
}

document.getElementById("langBtn").onclick = () => {
  lang = lang === "es" ? "en" : "es";
  document.getElementById("langBtn").innerText = lang === "es" ? "English" : "EspaÃ±ol";
  document.querySelector("header h1").innerText = lang === "es" ? "ðŸŒ´ ExploraRD â€” Mapa TurÃ­stico" : "ðŸŒ´ ExploreDR â€” Tourist Map";
  mostrarLugares();
};

mostrarLugares();
</script>
</body>
</html>
