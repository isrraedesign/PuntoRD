<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PuntoRD â€” GuÃ­a TurÃ­stica</title>

  <!-- Estilos de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Tu hoja de estilo personalizada -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>ğŸŒ´ PuntoRD â€” GuÃ­a TurÃ­stica Interactiva</h1>
    <p id="descripcion">Descubre los mejores lugares de Puerto Plata y Punta Cana</p>

    <div class="controles">
      <label for="languageSelect">Idioma:</label>
      <select id="languageSelect">
        <option value="es">EspaÃ±ol ğŸ‡ªğŸ‡¸</option>
        <option value="en">English ğŸ‡¬ğŸ‡§</option>
      </select>

      <label for="provinceSelect">Provincia:</label>
      <select id="provinceSelect">
        <option value="puertoplata">Puerto Plata</option>
        <option value="puntacana">Punta Cana</option>
      </select>
    </div>
  </header>

  <!-- AQUÃ VA EL MAPA -->
  <div id="map"></div>

  <footer>
    <p>Â© 2025 PuntoRD â€” RepÃºblica Dominicana ğŸŒ´</p>
  </footer>

  <!-- Scripts de Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // Crear mapa
    const map = L.map('map').setView([19.78, -70.68], 12);

    // Capa de mapa libre (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Cargar lugares desde JSON
    async function cargarLugares(provincia) {
      const respuesta = await fetch('lugares.json');
      const lugares = await respuesta.json();

      // Borrar marcadores anteriores
      map.eachLayer(layer => {
        if (layer instanceof L.Marker) map.removeLayer(layer);
      });

      // Filtrar lugares por provincia
      const filtrados = lugares.filter(l => l.provincia === provincia);

      // Agregar marcadores al mapa
      filtrados.forEach(lugar => {
        const marker = L.marker([lugar.lat, lugar.lon]).addTo(map);
        marker.bindPopup(`<b>${lugar.nombre}</b><br>${lugar.descripcion}<br><a href="${lugar.ruta}" target="_blank">ğŸ§­ CÃ³mo llegar</a>`);
      });

      // Centrar mapa segÃºn provincia
      if (provincia === "puertoplata") map.setView([19.78, -70.68], 12);
      if (provincia === "puntacana") map.setView([18.68, -68.4], 12);
    }

    // Cambiar provincia
    document.getElementById('provinceSelect').addEventListener('change', e => {
      cargarLugares(e.target.value);
    });

    // Cambiar idioma
    const textos = {
      es: "Descubre los mejores lugares de Puerto Plata y Punta Cana",
      en: "Discover the best places in Puerto Plata and Punta Cana"
    };

    document.getElementById('languageSelect').addEventListener('change', e => {
      const lang = e.target.value;
      document.getElementById('descripcion').textContent = textos[lang];
    });

    // Cargar por defecto Puerto Plata
    cargarLugares("puertoplata");
  </script>
</body>
</html>
