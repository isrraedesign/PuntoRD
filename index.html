<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ExploraRD - Guía Turística Interactiva</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  body {margin:0;font-family:'Poppins',sans-serif;}
  #map {height:100vh;}
  #langBtn {position:absolute;top:10px;right:10px;z-index:1000;padding:6px 10px;border:none;background:#00796b;color:white;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<button id="langBtn">English</button>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
let lang="es";
const map=L.map("map").setView([18.7,-70.2],7);
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',{attribution:"© OpenStreetMap"}).addTo(map);

const lugares=[
  {es:{nombre:"Teleférico de Puerto Plata",tipo:"Mirador",desc:"Vista panorámica desde la cima del monte Isabel de Torres"},
   en:{nombre:"Puerto Plata Cable Car",tipo:"Viewpoint",desc:"Panoramic view from Isabel de Torres mountain"},
   coords:[19.77,-70.69]},
  {es:{nombre:"Playa Bávaro",tipo:"Playa",desc:"Arena blanca y mar turquesa en Punta Cana"},
   en:{nombre:"Bavaro Beach",tipo:"Beach",desc:"White sand and turquoise sea in Punta Cana"},
   coords:[18.69,-68.43]},
  {es:{nombre:"Cascada El Limón",tipo:"Cascada",desc:"Hermosa cascada natural en Samaná"},
   en:{nombre:"El Limón Waterfall",tipo:"Waterfall",desc:"Beautiful natural waterfall in Samaná"},
   coords:[19.29,-69.40]},
  {es:{nombre:"Bahía de las Águilas",tipo:"Playa",desc:"Una de las playas más vírgenes del Caribe"},
   en:{nombre:"Bahía de las Águilas",tipo:"Beach",desc:"One of the most pristine beaches in the Caribbean"},
   coords:[17.82,-71.55]}
];

// Función para mostrar los marcadores con nombre visible
function mostrarLugares(){
  map.eachLayer(l=>{if(l instanceof L.Marker)map.removeLayer(l);});
  lugares.forEach(l=>{
    const texto=lang==="es"?l.es:l.en;
    const marker=L.marker(l.coords).addTo(map)
      .bindPopup(`<b>${texto.nombre}</b><br>${texto.tipo}<br>${texto.desc}<br><button onclick="abrirRuta(${l.coords[0]},${l.coords[1]})">${lang==="es"?"Cómo llegar":"Get directions"}</button>`)
      .bindTooltip(texto.nombre,{permanent:true,direction:"top",offset:[0,-10]});
  });
}

// Abrir ruta en Google Maps
function abrirRuta(lat,lon){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const url=`https://www.google.com/maps/dir/${pos.coords.latitude},${pos.coords.longitude}/${lat},${lon}`;
      window.open(url,"_blank");
    },()=>window.open(`https://www.google.com/maps?q=${lat},${lon}`,"_blank"));
  }else{
    window.open(`https://www.google.com/maps?q=${lat},${lon}`,"_blank");
  }
}

document.getElementById("langBtn").onclick=()=>{
  lang=lang==="es"?"en":"es";
  document.getElementById("langBtn").innerText=lang==="es"?"English":"Español";
  mostrarLugares();
};

mostrarLugares();
</script>
</body>
</html>
